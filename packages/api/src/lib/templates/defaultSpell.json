{
  "id": "c7776058-7f9b-4b9a-bb58-e2d38a9a4a1a",
  "name": "DocumentSearch",
  "projectId": "clj2vqojh0003mh08af6qvciz",
  "hash": "08f3c6207aa61328ec21cbaca83ea80f",
  "createdAt": "1687183026661",
  "updatedAt": "1687791999662",
  "creatorId": null,
  "graph": {
    "id": "demo@0.1.0",
    "nodes": {
      "260": {
        "id": 260,
        "data": {
          "name": "Output - Default",
          "error": false,
          "success": false,
          "isOutput": true,
          "socketKey": "faedf39a-0504-4da7-91f4-9a8118fb8248",
          "outputType": "Default",
          "sendToPlaytest": true
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 506,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "input": {
            "connections": [
              {
                "node": 506,
                "output": "result",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "event": {
            "connections": []
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 286,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "output": {
            "connections": []
          }
        },
        "position": [816, -96],
        "name": "Output"
      },
      "286": {
        "id": 286,
        "data": {
          "name": "conversation",
          "type": "conversation",
          "error": false,
          "success": false,
          "dataControls": {
            "name": {
              "expanded": true
            },
            "type": {
              "expanded": true
            }
          }
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 260,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "content": {
            "connections": [
              {
                "node": 317,
                "output": "content",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "sender": {
            "connections": []
          },
          "event": {
            "connections": [
              {
                "node": 418,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "embedding": {
            "connections": []
          },
          "type": {
            "connections": []
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 379,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [1152, -48],
        "name": "Store Event"
      },
      "288": {
        "id": 288,
        "data": {
          "name": "conversation",
          "type": "conversation",
          "error": false,
          "success": false,
          "max_count": "1",
          "dataControls": {
            "name": {
              "expanded": true
            },
            "type": {
              "expanded": true
            },
            "max_count": {
              "expanded": true
            }
          }
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 317,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "event": {
            "connections": [
              {
                "node": 418,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "embedding": {
            "connections": []
          },
          "type": {
            "connections": []
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 506,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "events": {
            "connections": [
              {
                "node": 506,
                "input": "conversation",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [16, 16],
        "name": "Event Recall"
      },
      "317": {
        "id": 317,
        "data": {
          "success": false,
          "socketKey": "6fc09be7-92d9-45c5-af9c-7d669d5c7664"
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 418,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "event": {
            "connections": [
              {
                "node": 418,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 288,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 514,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "agentId": {
            "connections": []
          },
          "content": {
            "connections": [
              {
                "node": 286,
                "input": "content",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 514,
                "input": "input",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 506,
                "input": "input",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "client": {
            "connections": []
          },
          "channel": {
            "connections": []
          },
          "channelType": {
            "connections": []
          },
          "connector": {
            "connections": []
          },
          "entities": {
            "connections": []
          },
          "projectId": {
            "connections": []
          },
          "observer": {
            "connections": [
              {
                "node": 379,
                "input": "sender",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "sender": {
            "connections": []
          },
          "embedding": {
            "connections": []
          },
          "rawData": {
            "connections": []
          }
        },
        "position": [-352, 0],
        "name": "Event Destructure"
      },
      "379": {
        "id": 379,
        "data": {
          "name": "conversation",
          "type": "conversation",
          "error": false,
          "success": false,
          "dataControls": {
            "name": {
              "expanded": true
            },
            "type": {
              "expanded": true
            }
          }
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 286,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "content": {
            "connections": []
          },
          "sender": {
            "connections": [
              {
                "node": 317,
                "output": "observer",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "event": {
            "connections": [
              {
                "node": 418,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "embedding": {
            "connections": []
          },
          "type": {
            "connections": []
          }
        },
        "outputs": {
          "trigger": {
            "connections": []
          }
        },
        "position": [1517.165986108223, -86.33793456449052],
        "name": "Store Event"
      },
      "388": {
        "id": 388,
        "data": {
          "name": "Input - Discord (Text)",
          "text": {
            "id": "4305e4af-f91d-4869-b570-f317c1ed9058",
            "inputs": {
              "Input - Discord (Voice)": {
                "type": "playtest",
                "client": "playtest",
                "sender": "playtestSender",
                "agentId": "preview",
                "channel": "playtest",
                "content": "hello",
                "entities": ["playtestSender", "Agent"],
                "observer": "Agent",
                "projectId": "bb1b3d24-84e0-424e-b4f1-57603f307a89",
                "channelType": "playtest"
              }
            },
            "secrets": {},
            "projectId": "bb1b3d24-84e0-424e-b4f1-57603f307a89",
            "spellName": "Discord Example",
            "publicVariables": "{}"
          },
          "isInput": true,
          "success": false,
          "useData": true,
          "inputType": "Discord (Text)",
          "socketKey": "2255eef5-2b18-4f0f-b0f5-1c8fb8e347f7",
          "useDefault": false,
          "dataControls": {
            "inputType": {
              "expanded": true
            },
            "useDefault": {
              "expanded": true
            },
            "defaultValue": {
              "expanded": true
            }
          },
          "defaultValue": "Hello world"
        },
        "inputs": {},
        "outputs": {
          "output": {
            "connections": [
              {
                "node": 418,
                "input": "text data",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "trigger": {
            "connections": [
              {
                "node": 418,
                "input": "text trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-1081.428534649755, -1.7585139444544495],
        "name": "Input"
      },
      "417": {
        "id": 417,
        "data": {
          "name": "Input - Discord (Voice)",
          "text": {
            "id": "4305e4af-f91d-4869-b570-f317c1ed9058",
            "inputs": {
              "Input - Discord (Voice)": {
                "type": "playtest",
                "client": "playtest",
                "sender": "playtestSender",
                "agentId": "preview",
                "channel": "playtest",
                "content": "hello",
                "entities": ["playtestSender", "Agent"],
                "observer": "Agent",
                "projectId": "bb1b3d24-84e0-424e-b4f1-57603f307a89",
                "channelType": "playtest"
              }
            },
            "secrets": {},
            "projectId": "bb1b3d24-84e0-424e-b4f1-57603f307a89",
            "spellName": "Discord Example",
            "publicVariables": "{}"
          },
          "isInput": true,
          "success": false,
          "useData": true,
          "inputType": "Discord (Voice)",
          "socketKey": "5907593e-a177-4123-8fa8-d743d60ed342",
          "useDefault": false,
          "dataControls": {
            "inputType": {
              "expanded": true
            },
            "useDefault": {
              "expanded": true
            },
            "defaultValue": {
              "expanded": true
            }
          },
          "defaultValue": "Hello world"
        },
        "inputs": {},
        "outputs": {
          "output": {
            "connections": [
              {
                "node": 418,
                "input": "voice data",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "trigger": {
            "connections": [
              {
                "node": 418,
                "input": "voice trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-1077.3249707945567, 209.8951202273657],
        "name": "Input"
      },
      "418": {
        "id": 418,
        "data": {
          "inputs": [
            {
              "name": "text trigger",
              "taskType": "option",
              "socketKey": "text trigger",
              "socketType": "triggerSocket",
              "connectionType": "input"
            },
            {
              "name": "text data",
              "taskType": "output",
              "socketKey": "text data",
              "socketType": "anySocket",
              "connectionType": "input"
            },
            {
              "name": "voice trigger",
              "taskType": "option",
              "socketKey": "voice trigger",
              "socketType": "triggerSocket",
              "connectionType": "input"
            },
            {
              "name": "voice data",
              "taskType": "output",
              "socketKey": "voice data",
              "socketType": "anySocket",
              "connectionType": "input"
            }
          ],
          "success": false,
          "dataControls": {
            "inputs": {
              "expanded": true
            }
          }
        },
        "inputs": {
          "text trigger": {
            "connections": [
              {
                "node": 388,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "text data": {
            "connections": [
              {
                "node": 388,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "voice trigger": {
            "connections": [
              {
                "node": 417,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "voice data": {
            "connections": [
              {
                "node": 417,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 317,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "output": {
            "connections": [
              {
                "node": 317,
                "input": "event",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 288,
                "input": "event",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 286,
                "input": "event",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 379,
                "input": "event",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-712.1918012213798, 3.596469524117472],
        "name": "Exclusive Gate"
      },
      "506": {
        "id": 506,
        "data": {
          "stop": "###",
          "error": false,
          "model": "gpt-3.5-turbo",
          "top_k": 50,
          "top_p": "0.1",
          "success": false,
          "max_tokens": "200",
          "temperature": "0.1",
          "dataControls": {
            "stop": {
              "expanded": true
            },
            "model": {
              "expanded": true
            },
            "top_p": {
              "expanded": true
            },
            "max_tokens": {
              "expanded": true
            },
            "temperature": {
              "expanded": true
            },
            "presence_penalty": {
              "expanded": true
            },
            "frequency_penalty": {
              "expanded": true
            }
          },
          "stopSequences": "",
          "presence_penalty": 0,
          "frequency_penalty": 0,
          "encoder_repetition_penalty": 0
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 288,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              },
              {
                "node": 513,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "system": {
            "connections": [
              {
                "node": 513,
                "output": "prompt",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "conversation": {
            "connections": [
              {
                "node": 288,
                "output": "events",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "input": {
            "connections": [
              {
                "node": 317,
                "output": "content",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 260,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "result": {
            "connections": [
              {
                "node": 260,
                "input": "input",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "error": {
            "connections": []
          }
        },
        "position": [448, 0],
        "name": "Generate Text"
      },
      "508": {
        "id": 508,
        "data": {
          "type": "text",
          "success": false,
          "max_count": "1"
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 514,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "embedding": {
            "connections": [
              {
                "node": 514,
                "output": "embedding",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "type": {
            "connections": [
              {
                "node": 515,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 512,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "documents": {
            "connections": [
              {
                "node": 512,
                "input": "documents",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-128, -496],
        "name": "Get Documents"
      },
      "512": {
        "id": 512,
        "data": {
          "success": false
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 508,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "documents": {
            "connections": [
              {
                "node": 508,
                "output": "documents",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 513,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "content": {
            "connections": [
              {
                "node": 513,
                "input": "Content",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [224, -656],
        "name": "Document to Content"
      },
      "513": {
        "id": 513,
        "data": {
          "inputs": [
            {
              "name": "AgentName",
              "taskType": "output",
              "socketKey": "AgentName",
              "socketType": "anySocket",
              "connectionType": "input"
            },
            {
              "name": "Content",
              "taskType": "output",
              "socketKey": "Content",
              "socketType": "anySocket",
              "connectionType": "input"
            }
          ],
          "fewshot": "You are an Sentinent AI, called {{AgentName}}, you know about everything, you will have help others to solve their problems and build relations.\n\nBased on the Query user has asked you have searched your memory and have got this {{Content}}\n\nIf you do not have an explict knowledge from the above documents please mention \"I don't know about this.\"",
          "success": false
        },
        "inputs": {
          "AgentName": {
            "connections": [
              {
                "node": 516,
                "output": "output",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "Content": {
            "connections": [
              {
                "node": 512,
                "output": "content",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "trigger": {
            "connections": [
              {
                "node": 512,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 506,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "prompt": {
            "connections": [
              {
                "node": 506,
                "input": "system",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [560, -688],
        "name": "Text Template"
      },
      "514": {
        "id": 514,
        "data": {
          "error": false,
          "model": "text-embedding-ada-002",
          "success": false
        },
        "inputs": {
          "trigger": {
            "connections": [
              {
                "node": 317,
                "output": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "input": {
            "connections": [
              {
                "node": 317,
                "output": "content",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "outputs": {
          "trigger": {
            "connections": [
              {
                "node": 508,
                "input": "trigger",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          },
          "embedding": {
            "connections": [
              {
                "node": 508,
                "input": "embedding",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-560, -448],
        "name": "Create Text Embedding"
      },
      "515": {
        "id": 515,
        "data": {
          "_var": "agent-flow",
          "success": false,
          "isPublic": false
        },
        "inputs": {},
        "outputs": {
          "output": {
            "connections": [
              {
                "node": 508,
                "input": "type",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [-336, -304],
        "name": "String Variable"
      },
      "516": {
        "id": 516,
        "data": {
          "_var": "MagickML",
          "name": "AgentName",
          "success": false,
          "isPublic": true
        },
        "inputs": {},
        "outputs": {
          "output": {
            "connections": [
              {
                "node": 513,
                "input": "AgentName",
                "data": {
                  "hello": "hello"
                }
              }
            ]
          }
        },
        "position": [352, -480],
        "name": "String Variable"
      }
    },
    "comments": [
      {
        "text": "Prompt template and GPT-3 completion",
        "position": [392.86631467917005, -148.17462578270437],
        "links": [261, 506],
        "type": "frame",
        "width": 300.9999999999999,
        "height": 359
      },
      {
        "text": "recall the last 6 conversation events",
        "position": [-32.644720754678026, -71.91190165739141],
        "links": [288],
        "type": "frame",
        "width": 301,
        "height": 266
      },
      {
        "text": "Respond with the output",
        "position": [760.4801879012977, -152.9928224381314],
        "links": [260],
        "type": "frame",
        "width": 301,
        "height": 230
      },
      {
        "text": "store the input from sender",
        "position": [1104.3262165242882, -110.52318497149952],
        "links": [286],
        "type": "frame",
        "width": 301,
        "height": 302
      },
      {
        "text": "store the response from api",
        "position": [1472.2722068410978, -142.3630169310008],
        "links": [291, 319, 379],
        "type": "frame",
        "width": 301,
        "height": 302
      },
      {
        "text": "Break out the event to get the inner fields",
        "position": [-400.22581737165865, -72.69227958005936],
        "links": [317],
        "type": "frame",
        "width": 301,
        "height": 518
      },
      {
        "text": "first in gets handled",
        "position": [-758.4320684099528, -69.10810048805959],
        "links": [418],
        "type": "frame",
        "width": 302,
        "height": 304
      },
      {
        "text": "input",
        "position": [-1121.8979788311847, -69.14012304787181],
        "links": [388, 417],
        "type": "frame",
        "width": 304.3241457459012,
        "height": 456.8949592747954
      }
    ]
  }
}
